<!--
 * ***** BEGIN LICENSE BLOCK *****
 *
 * Zimbra Collaboration Suite Web Client
 * Copyright (C) 2014, 2016 Synacor, Inc.
 *
 * The contents of this file are subject to the Common Public Attribution License Version 1.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at: https://www.zimbra.com/license
 * The License is based on the Mozilla Public License Version 1.1 but Sections 14 and 15
 * have been added to cover use of software over a computer network and provide for limited attribution
 * for the Original Developer. In addition, Exhibit A has been modified to be consistent with Exhibit B.
 *
 * Software distributed under the License is distributed on an "AS IS" basis,
 * WITHOUT WARRANTY OF ANY KIND, either express or implied.
 * See the License for the specific language governing rights and limitations under the License.
 * The Original Code is Zimbra Open Source Web Client.
 * The Initial Developer of the Original Code is Zimbra, Inc.  All rights to the Original Code were
 * transferred by Zimbra, Inc. to Synacor, Inc. on September 14, 2015.
 *
 * All portions of the code are Copyright (C) 2014, 2016 Synacor, Inc. All Rights Reserved.
 *
 * ***** END LICENSE BLOCK *****
-->
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0014)about:internet -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Adobe RoboHelp 10" />
<title>Installing SSL Certificate for a Domain</title>
<link rel="StyleSheet" href="../default.css" type="text/css" />
<script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
	origWidth = innerWidth;
	origHeight = innerHeight;
	onresize = reDo;
}
onerror = null; 
//]]>
</script>
<style type="text/css">
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
-->
</style>
<script type="text/javascript" language="javascript1.2" src="../whmsg.js" charset="utf-8"></script>
<script type="text/javascript" language="javascript" src="../whver.js" charset="utf-8"></script>
<script type="text/javascript" language="javascript1.2" src="../whutils.js" charset="utf-8"></script>
<script type="text/javascript" language="javascript1.2" src="../whproxy.js" charset="utf-8"></script>
<script type="text/javascript" language="javascript1.2" src="../whlang.js" charset="utf-8"></script>
<script type="text/javascript" language="javascript1.2" src="../whtopic.js" charset="utf-8"></script>

</head>
<body><script type="text/javascript" language="javascript1.2">//<![CDATA[
<!--
if (window.gbWhTopic)
{
	var strUrl = document.location.href;
	var bc = 0;
	var n = strUrl.toLowerCase().indexOf("bc-");
	if(n != -1)
	{
		document.location.href = strUrl.substring(0, n);
		bc = strUrl.substring(n+3);
	}

	if (window.addTocInfo)
	{
	addButton("show",BTN_TEXT,"Show TOC","","","","",0,0,"","","");

	}
	if (window.writeBtnStyle)
		writeBtnStyle();

	if (window.writeIntopicBar)
		writeIntopicBar(1);

	
	
}
else
	if (window.gbIE4)
		document.location.reload();

onLoadHandler = function()
{
  if (window.setRelStartPage)
	{
	setTimeout("setRelStartPage('../administration_console_help_draft8514.htm');", 1)

    setTimeout("UpdateBreadCrumbsMarker();", 1);
	}
}

if (window.addEventListener){  
	window.addEventListener('load', onLoadHandler, false);   
} else if (window.attachEvent){  
	window.attachEvent('onload', onLoadHandler);  
}

function onSetStartPage()
{
  autoSync(1);
  sendSyncInfo();
  sendAveInfoOut();
}
//-->
//]]></script>
<script type="text/javascript" src="../ehlpdhtm.js" language="JavaScript1.2"></script>

<p><img src="../zimbra_logo.png" alt="" style="border: none;" border="0" /></p>
<hr width="95%" align="left" />

<h1>Installing SSL Certificate for a Domain</h1>
<p>An SSL certificate can be installed for each domain. Zimbra Proxy must be installed and correctly configured to support multiple domains. For each domain, a virtual host name and Virtual IP address are configured with the virtual domain name and IP address.</p>
<p>Each domain must be issued a signed commercial certificate that attests that the public key contained in the certificate belongs to that domain.</p>
<p>To install the certificate, you paste the CA certificate in the Domain&gt;Certificate tab on the administration console and you deploy the certificate from the CLI.</p>
<ol style="list-style: decimal;">
<li>
<p>Configure the Zimbra Proxy Virtual Host Name and IP Address. From the CLI, as zimbra, type</p>
</li>
</ol>
<p style="font-family: 'Courier New', monospace; font-weight: bold; margin-left: 40px;">zmprov md &lt;domain&gt; +zimbraVirtualHostName {domain.example.com}+zimbraVirtualIPAddress {1.2.3.4}</p>
<p style="font-weight: bold; font-family: Arial, sans-serif; margin-left: 40px;">Note: <span style="font-weight: normal;">The virtual domain name requires a valid DNS configuration with an A record.</span></p>
<ol start="2" style="list-style: decimal;">
<li>
<p style="margin-left: 0px; font-family: Arial, sans-serif; font-weight: normal;">In the administration console, select the domain to edit.</p>
</li>
<li>
<p style="margin-left: 0px; font-family: Arial, sans-serif; font-weight: normal;">In the Domains&gt;Certificate page <span style="font-weight: bold;">Domain Certificate</span> field, paste the domain's issued signed commercial root certificate and the intermediate certificates in descending order, starting with your domain certificate. This order allows the full certificate chain to be validated.</p>
</li>
<li style="font-family: Arial, sans-serif; font-weight: normal;">
<p style="margin-left: 0px; font-family: Arial, sans-serif; font-weight: normal;">In the <span style="font-weight: bold;">Domain Private Key</span> field, paste the private key files. Remove any password authentication from the private key before the certificate is saved. See you commercial certificate provider for details about how to remove the password.</p>
</li>
<li style="font-family: Arial, sans-serif; font-weight: normal;">
<p style="margin-left: 0px; font-family: Arial, sans-serif; font-weight: normal;">Click <span style="font-weight: bold;">Save</span>.</p>
</li>
<li style="font-family: Arial, sans-serif; font-weight: normal;">
<p style="margin-left: 0px; font-family: Arial, sans-serif; font-weight: normal;">Go to the ZCS CLI command line to deploy the certificates.</p>
</li>
<li style="font-family: Arial, sans-serif; font-weight: normal;">
<p style="margin-left: 0px; font-family: Arial, sans-serif; font-weight: normal;">As root, type</p>
</li>
</ol>
<p style="margin-left: 40px; font-family: 'Courier New', monospace; font-weight: bold;">/opt/zimbra/libexec/zmdomaincertmgr deploycrts</p>
<ol start="8" style="list-style: decimal;">
<li>
<p style="font-family: Arial, sans-serif;">To restart proxy services to make the changes take effect, as zimbra, type</p>
</li>
</ol>
<p style="margin-left: 40px; font-family: 'Courier New', monospace; font-weight: bold;">zmproxyctl stop</p>
<p style="margin-left: 40px; font-family: 'Courier New', monospace; font-weight: bold;">zmproxyctl start</p>
<p style="font-family: 'Courier New', monospace; font-weight: bold; margin-left: 0px;">&#160;</p>
<p>&#160;</p>
<p>-------------------------------------------------------------------------------------------------------<br />
<span style="font-size: 8pt;"><font size="1" style="font-size:8pt;">Copyright @ 2005-2014 Zimbra, Inc. All rights 
 reserved</font></span></p>
<script type="text/javascript" language="javascript1.2">//<![CDATA[
<!--
if (window.writeIntopicBar)
	writeIntopicBar(0);


highlightSearch();
//-->
//]]></script>
</body>
</html>
